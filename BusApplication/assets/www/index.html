<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0 user-scalable=no">
<title>Find Buses</title>

<link rel="stylesheet" href="css/bootstrap.min.css">

<script src="js/jquery.js" type="text/javascript"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/resources_home.default.js"> </script>
<script src="js/resources_home.en.js"> </script>
<script src="js/cordova.js"></script>
    
<script type="text/javascript">
	var languageCode;
	var busCode;
	
	document.addEventListener("deviceready", onDeviceReady, false);
	function onDeviceReady() {
		document.addEventListener("backbutton", doExit, false);
        window.addEventListener("orientationchange", orientationChange, false);
        adjustScreen();
		var flag = true;
		flag = 	checkConnection();
		
		if(flag == false) {
			navigator.notification.alert(
			    'Cannot connect to Internet. \nPlease check you connection settings and try again',  // message
			    closeActivity,         				// callback
			    'No network connection',            // title
			    'OK'                  				// buttonName
			);
		} else {
			document.getElementsByTagName("body")[0].style.display = "block";
		}
	}
	
	function closeActivity() {
		navigator.app.exitApp();
	}

    function orientationChange(e) {
    	adjustScreen();
	}
	
	function adjustScreen() {
		if(window.orientation == -90 || window.orientation == 90) {
			//alert("landscape:");
			document.getElementById('centerDiv').setAttribute( "class", "centerLandscapeDiv" );
		} else {
			//alert("portrait:");
			document.getElementById('centerDiv').setAttribute( "class", "centerPotraitDiv" );
		}	
	}

	function doExit() {
		navigator.notification.confirm('Are you sure?', onConfirm, 'Exit');
    }
    
    function onConfirm(btnIndex) {
		if(btnIndex == 1) {
			navigator.app.exitApp();
		}
	}
	
	function checkConnection() {
	    var networkState = navigator.network.connection.type;
	    var booldata = true;
	
	    if(networkState == Connection.NONE || networkState == Connection.UNKNOWN) {
	    	booldata = false;
	    }
	    return booldata;
	}

	$(document).ready(function() {
		if(localStorage["languageCode"] == null) {
    		localStorage["languageCode"] = "1";
		}
		languageCode = localStorage["languageCode"];
		document.getElementById('language').selectedIndex = languageCode-1;
		if(localStorage["busCode"] == null) {
    		localStorage["busCode"] = "1";
		}
		busCode = localStorage["busCode"];
		document.getElementById('busCode').selectedIndex = busCode-1;
		
		if(languageCode == "1") {
	   		includeJS("js/resources_home.en.js");
	    	$.extend(MyApp.resources, localizedResources);
		} else if(languageCode == "2") {
	   		includeJS("js/resources_home.hi.js");
	    	$.extend(MyApp.resources, localizedResources);
	    } else if(languageCode == "3") {
	   		includeJS("js/resources_home.te.js");
	    	$.extend(MyApp.resources, localizedResources);
		}
    	document.getElementById('stopsNearMe').innerHTML = MyApp.resources.stopsNearMe;    
    	document.getElementById('searchByRoute').innerHTML = MyApp.resources.searchByRoute;    
    	document.getElementById('searchByStop').innerHTML = MyApp.resources.searchByStop;    
    	document.getElementById('searchByNumber').innerHTML = MyApp.resources.searchByNumber;    
    	document.getElementById('volvo').innerHTML = MyApp.resources.volvoType;    
    	document.getElementById('metro').innerHTML = MyApp.resources.otherMetro;    

        $('#language').change(function(){
        	languageCode = $( "#language" ).val();
        	if(languageCode == "हिन्दी") {
        		localStorage["languageCode"] = "2";
   	       		includeJS("js/resources_home.hi.js");
   	        	$.extend(MyApp.resources, localizedResources);
            } else if(languageCode == "తెలుగు") {
            	localStorage["languageCode"] = "3";
	       		includeJS("js/resources_home.te.js");
	        	$.extend(MyApp.resources, localizedResources);
        	} else {
            	localStorage["languageCode"] = "1";
	       		includeJS("js/resources_home.en.js");
	        	$.extend(MyApp.resources, localizedResources);
        	}
	    	document.getElementById('stopsNearMe').innerHTML = MyApp.resources.stopsNearMe;    
	    	document.getElementById('searchByRoute').innerHTML = MyApp.resources.searchByRoute;    
        	document.getElementById('searchByStop').innerHTML = MyApp.resources.searchByStop;    
        	document.getElementById('searchByNumber').innerHTML = MyApp.resources.searchByNumber;    
	    	document.getElementById('volvo').innerHTML = MyApp.resources.volvoType;    
	    	document.getElementById('metro').innerHTML = MyApp.resources.otherMetro;    
        });
        
		if(busCode == "1") {
			document.getElementById('searchByNumberHref').href = "searchByNumberVolvo.html";
			document.getElementById('searchByStopHref').href = "searchByStopVolvo.html";
			document.getElementById('searchByRouteHref').href = "searchByRouteVolvo.html";
			document.getElementById('stopsNearMeHref').href = "stopsNearMeVolvo.html";
		} else if(busCode == "2") {
			document.getElementById('searchByNumberHref').href = "searchByNumber.html";
			document.getElementById('searchByStopHref').href = "searchByStop.html";
			document.getElementById('searchByRouteHref').href = "searchByRoute.html";
			document.getElementById('stopsNearMeHref').href = "stopsNearMe.html";
		}
    	
        $('#busCode').change(function(){
        	var busCodeVal = $( "#busCode" ).val();
        	//alert("busCodeVal:"+busCodeVal);
        	if((busCodeVal == "Volvo Buses (Metro Luxury)") || (busCodeVal == "वोल्वो बसें (मेट्रो लग्ज़री)") || (busCodeVal == "వోల్వో బస్సులు (మెట్రో లగ్జరీ)")) {
        		localStorage["busCode"] = "1";
				document.getElementById('searchByNumberHref').href = "searchByNumberVolvo.html";
				document.getElementById('searchByStopHref').href = "searchByStopVolvo.html";
				document.getElementById('searchByRouteHref').href = "searchByRouteVolvo.html";
				document.getElementById('stopsNearMeHref').href = "stopsNearMeVolvo.html";
            } else if((busCodeVal == "Other Metro Buses") || (busCodeVal == "अन्य मेट्रो बसें") || (busCodeVal == "ఇతర మెట్రో బస్సులు")) {
        		localStorage["busCode"] = "2";
				document.getElementById('searchByNumberHref').href = "searchByNumber.html";
				document.getElementById('searchByStopHref').href = "searchByStop.html";
				document.getElementById('searchByRouteHref').href = "searchByRoute.html";
				document.getElementById('stopsNearMeHref').href = "stopsNearMe.html";
        	}
        });	
	});
	
	function includeJS(jsFile) {
	    $('head').append($('<script>').attr('type', 'text/javascript').attr('src', jsFile));
	}	    	
		
</script>
<style>
.centerPotraitDiv {
    width:240px;
    height:240px;
    position: fixed;
    top: 50%;
    left: 50%;
    margin-top: -80px;
    margin-left: -120px;
    padding-bottom: 40px;
}
.centerLandscapeDiv {
    width:240px;
    height:240px;
    top: 50%;
    left: 50%;
    margin-top: -20px;
    margin-left: -120px;
    padding-bottom: 120px;
}
</style>
</head>

<body style="background: url(images/m.jpg); display: none;">

	<div id="headernav" >
		<nav class="navbar-fixed-top" role="navigation" style="background: url(images/m.jpg); border-bottom: 3px solid #345678; width: 100%;" >
			<center>
				<div style="padding-left:10px; padding-top:4px; padding-right:10px; width: 100%;"><img width="100%" style="height: 66px !important;" src="images/rtc_logo31.gif" /></div>
				<div style="font-size: 6px; opacity: 0.1; float: right; margin-top: -6px;">BCP</div>
			</center>
		</nav>
    </div>
	
	 <div class="container" style="padding-top:70px; padding-bottom: 30px; ">
		<div class="btn-group" style="float: left; margin-top: 36px;">
	        <select id="busCode" style="font-size: 10px; width: 152px; height: 30px; border-radius: 4px;">
				<option id="volvo"></option>
				<option id="metro"></option>
			</select>	        
    	</div>
		<div class="btn-group" style="float: right; margin-top: 36px;">
	        <select id="language" style="font-size: 10px; width: 64px; height: 30px; border-radius: 4px;">
				<option>English</option>
				<option>हिन्दी</option>
				<option>తెలుగు</option>					
	        </select>	        
    	</div>
    </div> 
    
	<!-- Icons Row -->
	<center>
	<div class="centerPotraitDiv" id="centerDiv">
		<div class="row" >				
			<div class="col-xs-6 portfolio-item" style="padding-bottom: 6px; border-bottom: 1px solid #345678; border-right: 1px solid #345678;">
				<a id="stopsNearMeHref" href="stopsNearMe.html"> <img class="img-responsive img-circle" src="images/bus.png" width="50px" alt=""></a>
				<h6 style="text-align: center;"><span id="stopsNearMe"></span></h6>
			</div>
			
			<div class="col-xs-6 portfolio-item" style="padding-bottom: 6px; border-bottom: 1px solid #345678; border-left: 1px solid #345678;">
				<a id="searchByStopHref" href="searchByStop.html"> <img class="img-responsive img-circle" src="images/greenbus.png" width="50px" alt=""></a>
				<h6 style="text-align: center;"><span id="searchByStop"></span></h6>
			</div>
		</div>			
		<div class="row" >		
			<div class="col-xs-6 portfolio-item" style="padding-top: 10px; border-top: 1px solid #345678; border-right: 1px solid #345678;">
				<a id="searchByRouteHref" href="searchByRoute.html"> <img class="img-responsive img-circle" src="images/stp.png" width="50px" alt=""></a>
				<h6 style="text-align: center;"><span id="searchByRoute"></span></h6>
			</div>
						
			<div class="col-xs-6 portfolio-item" style="padding-top: 10px; border-top: 1px solid #345678; border-left: 1px solid #345678;">
				<a id="searchByNumberHref" href="searchByNumberVolvo.html"> <img class="img-responsive img-circle" src="images/icon-route.png" width="67px" alt=""></a>
				<h6 style="text-align: center;"><span id="searchByNumber"></span></h6>
			</div>				
		</div>
	</div>
	</center>
			
	<div style="width: 100%;" id="footernav" >
		<nav class="navbar-fixed-bottom" role="navigation" style="background: url(images/m.jpg); border-top: 3px solid #345678; width: 100%;" >
			<div style="padding-top: 4px; padding-bottom: 2px; padding-left: 6px; width: 100%"><b>&nbsp;powered by CMCLTD.<b></div>
		</nav>
	</div>
</body>
</html>
